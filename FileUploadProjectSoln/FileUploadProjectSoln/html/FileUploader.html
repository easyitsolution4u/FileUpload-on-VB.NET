<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>File upload page</title>

    <script src="../Scripts/jquery-1.10.2.min.js"></script>

</head>
<body>


    <div>
        <input type="file" name="UploadFile" id="txtUploadFile" class="makethispretty" />
    </div>


    <div>

        <button id="btnUpload">Upload File</button>
    </div>

    <div id="divResultContainer">
        <textarea id="content" rows="10" cols="100"></textarea>
    </div>


    <script type="text/javascript">


        $("#divResultContainer").hide();

        $('#btnUpload').on('click', function (e) {
        
            var files = $("#txtUploadFile").get(0).files
        

            if (files.length > 0) {

                if (window.FormData !== undefined) {

                    var data = new FormData();

                    for (var x = 0; x < files.length; x++) {

                        data.append("file" + x, files[x]);

                    }

                    console.log("Date are : " + data);

                    $.ajax({

                        type: "POST",

                        url: '/FileUpload/Upload',

                        contentType: false,

                        processData: false,

                        data: data,

                        success: function (result) {


                            $("#divResultContainer").show();

                            $("#content").val(result);

                        },

                        error: function (xhr, status, p3, p4) {

                            var err = "Error " + " " + status + " " + p3 + " " + p4;

                            if (xhr.responseText && xhr.responseText[0] == "{")

                                err = JSON.parse(xhr.responseText).Message;

                            console.log(err);

                        }

                    });

                } else {

                    alert("This browser doesn't support HTML5 file uploads!");

                }

            }

        });
    </script>
</body>
</html>